# 量化交易系统 - UI使用指南

## 🚀 快速开始

### 1. 安装依赖

```bash
# 安装所有依赖（包括UI）
pip install -r requirements.txt

# 或仅安装UI依赖
pip install PyQt6
```

### 2. 运行UI

```bash
# 默认启动UI模式
python main.py

# 或明确指定UI模式
python main.py --ui

# 命令行模式（不需要UI）
python main.py --demo
python main.py --interactive
```

## 📊 界面说明

### 主窗口布局

```
┌────────────────────────────────────────────────────────────┐
│  菜单栏: 文件 | 策略 | 交易 | 工具 | 帮助                   │
├────────────────────────────────────────────────────────────┤
│  工具栏: [连接] [刷新] [回测] [交易] [策略] [设置]         │
├─────────┬─────────────────────────────────┬───────────────┤
│         │                                 │  持仓信息      │
│ 股票列表│       K线图 + 指标               │ ┌───────────┐  │
│ ┌─────┐│                                 │ │TSLA  100股│  │
│ │TSLA ││                                 │ │成本 $420  │  │
│ │NVDA ││                                 │ │盈亏 +5.2% │  │
│ │AAPL ││                                 │ └───────────┘  │
│ │01797││                                 │                │
│ └─────┘│                                 │  账户信息      │
│        │                                 │ 总资产: $100K  │
│ 自选股 ├─────────────────────────────────┤ 可用: $50K     │
│        │  信号面板                        │ 持仓: $50K     │
│ [新增] │ ┌───────────────────────────┐   │                │
│ [删除] │ │🟢 TSLA 买入信号            │   │  最新新闻      │
│        │ │  TSF > LSMA + 0.5%        │   │ ┌──────────┐   │
│        │ │  建议价: $420-$435        │   │ │Tesla发布  │   │
│        │ │  [立即交易] [查看详情]     │   │ │新车型...   │   │
│        │ └───────────────────────────┘   │ └──────────┘   │
├─────────┴─────────────────────────────────┴───────────────┤
│  状态栏: ✅ 已连接 | 最后更新: 10:30 | CPU: 5% | 内存: 2GB│
└────────────────────────────────────────────────────────────┘
```

### 功能模块

#### 1. 股票列表（左侧）
- 显示自选股列表
- 点击股票代码查看详情
- 支持添加/删除股票

#### 2. K线图（中间上方）
- 显示股票K线图
- 显示技术指标（TSF、LSMA等）
- 标注买卖信号

#### 3. 信号面板（中间下方）
- 实时显示交易信号
- 信号类型：🟢买入 🔴卖出 ⚪观望
- 显示信号详情和建议价格

#### 4. 持仓信息（右侧上方）
- 账户总览
  - 总资产
  - 可用资金
  - 持仓市值
  - 总盈亏
- 持仓列表
  - 股票代码
  - 持仓数量
  - 成本价/当前价
  - 盈亏情况

#### 5. 新闻与分析（右侧下方）
- 最新新闻标签页
  - 实时新闻推送
  - 新闻来源和时间
- 基本面分析标签页
  - 正面/负面因素
  - 综合评分

## 🎯 使用流程

### 1. 添加自选股

1. 在左侧股票列表中点击"新增"按钮
2. 输入股票代码：
   - 美股：TSLA, NVDA, AAPL
   - 港股：HK.01797, HK.00700
   - A股：600519, 000001
3. 点击确定

### 2. 查看股票数据

1. 在股票列表中点击股票代码
2. 系统自动加载K线数据
3. 在K线图中查看价格走势
4. 在信号面板查看交易信号

### 3. 配置策略

1. 点击工具栏"策略"按钮
2. 选择策略（TSF-LSMA、MACD、RSI）
3. 设置策略参数
4. 保存配置

### 4. 执行交易

1. 点击工具栏"交易"按钮
2. 选择买入/卖出
3. 输入价格和数量
4. 确认订单

## ⚙️ 配置说明

### 环境变量配置

在项目根目录创建`.env`文件：

```bash
# 美股数据API
FINANCIAL_DATASETS_API_KEY=your_api_key

# A股数据（Tushare）
TUSHARE_TOKEN=your_token

# AI分析（可选）
DEEPSEEK_API_KEY=your_key
OPENAI_API_KEY=your_key

# 港股交易（Futu）
FUTU_HOST=127.0.0.1
FUTU_PORT=11111
```

## 🔧 故障排除

### UI无法启动

1. 检查是否安装了PyQt6：
   ```bash
   pip install PyQt6
   ```

2. 检查Python版本（需要3.8+）：
   ```bash
   python --version
   ```

### 数据获取失败

1. 检查API密钥配置
2. 检查网络连接
3. 查看控制台错误信息

### 策略信号不显示

1. 确认已激活策略
2. 检查数据是否足够（至少需要60天数据）
3. 检查策略参数设置

## 📝 注意事项

1. **首次使用**：建议先运行`python main.py --demo`测试核心功能
2. **数据缓存**：系统会自动缓存数据，提高加载速度
3. **实时更新**：UI每分钟自动刷新一次数据
4. **交易安全**：默认使用模拟盘，实盘交易需谨慎

## 🎨 主题定制

系统支持暗色主题（默认），可在`config/settings.py`中修改：

```python
THEME = 'dark'  # 或 'light'
```

## 📚 更多信息

- 查看`README.md`了解命令行模式
- 查看`TRADING_SYSTEM_UI_DESIGN_2.md`了解详细设计
- 查看`PROJECT_SUMMARY.md`了解项目进度

## 🆘 获取帮助

如遇问题，请：
1. 查看控制台错误信息
2. 检查配置文件
3. 查看项目文档

---

**祝交易顺利！** 🚀
